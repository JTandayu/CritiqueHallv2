import Head from 'next/head'
import Image from 'next/image'
import { css, cx } from '@emotion/react'
import { motion } from "framer-motion"
import {
    FormControl,
    FormLabel,
    FormErrorMessage,
    FormHelperText,
    Text,
    Textarea,
    Button,
    Center,
  } from "@chakra-ui/react"
import { Heading } from "@chakra-ui/react"
import { Box } from "@chakra-ui/react"
import Link from 'next/link'
import styles from "@styles/Feedback.module.css";
import { extendTheme, useColorModeValue } from '@chakra-ui/react'
import { createBreakpoints } from '@chakra-ui/theme-tools'
import { Radio, RadioGroup } from '@chakra-ui/react'
import { useState, useEffect } from 'react';
import { Stack } from '@chakra-ui/react'
import axios from 'axios'
import { useCookies } from 'react-cookie'
import ScrollToTop from "react-scroll-to-top";


const breakpoints = createBreakpoints({
    sm: '320px',
    md: '768px',
    lg: '960px',
    xl: '1200px',
    '2xl': '1536px',
  })

const theme = extendTheme({ breakpoints })

export default function FeedbackPage(){
    const { API_URL } = process.env
    const { API_KEY } = process.env

    // const ans1, ans2, ans3, ans4 = useState('')

    const[ans1, setAns1] = useState(0)
    const[ans2, setAns2] = useState(0)
    const[ans3, setAns3] = useState(0)
    const[ans4, setAns4] = useState(0)
    const[feedback, setFeedback] = useState('')
    const [cookie, setCookies] = useCookies('token', 'encrypte_id')

    const config = {
        headers: { 
          'content-type': 'multipart/form-data',
          'X-API-KEY': `${API_KEY}`,
          'Authorization': 'Basic Y2Fwc3RvbmUyMDIxOjEyMzQ=',
          // 'Accept-Encoding': 'gzip, deflate, br',
          'Accept': 'application/json',
          'Token': cookie.token,
          'User-Id': cookie.encrypted_id
        }
    }

    const SubmitFeedback = async() =>{
        let formData = new FormData;
        formData.append('answer_1', ans1)
        formData.append('answer_2', ans2)
        formData.append('answer_3', ans3)
        formData.append('answer_4', ans4)
        formData.append('body', feedback)


        axios.post(`${API_URL}/api/feedback`, formData, config)
        .then((response)=>{
            console.log(response.data)
        }).catch((error)=>{
            console.log(error)
        })
    }

    return(
        <main className={useColorModeValue(styles.container, styles.container2)}>
            <Head>
            <title>Critique Hall | Feedback</title>
            <meta name="description" content="Critique Hall generated by Next App" />
            <link rel="icon" href={useColorModeValue('logo256.png', 'logo256-dark.png')} onLoad=""/>
            <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&display=swap" rel="stylesheet" />
            </Head>

            <ScrollToTop color={'black'} width={40} boxShadow={'dark-lg'} smooth />

            <Box top="0" h="100%" mx="auto" mt="14vh">
                <Heading fontFamily={'Raleway'} color={useColorModeValue('#1B1464', '#B2A3FF')} size="2xl" align="center">WE&apos;D LOVE TO HEAR FROM YOU!</Heading>
                <Heading fontFamily={'Raleway'} color={useColorModeValue('#1B1464', '#B2A3FF')} size="md" align="center" mt="5">Send your feedbacks and suggestions and we&apos;ll answer it for you.</Heading>
            </Box>

            <Box display={{lg: "flex", sm: 'block'}} w="70%" className={useColorModeValue(styles.box_light, styles.box_dark)} spacing="10px" top="0" h={{lg: "100%", sm: "100%", base: "100%"}} mb="5vh" mt="10" py="10" borderRadius={15}>
                <Box w={{lg: "80%" , sm: '100%'}} mx="auto" h="100%" p="6" color='white'>
                    <form action='' method='POST'>
                    <Heading fontFamily={'Raleway'} color="white" mx="auto">With regards to the website...</Heading>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>1. So, what do you think? Can you tell us a little bit about your experience?</FormLabel>
                        {/* <RadioGroup onChange={(e)=>setAns1(e.target.value)}>
                        <Stack direction='row'>
                            <Radio value='1'></Radio>
                            <Radio value='2'></Radio>
                            <Radio value='3'></Radio>
                            <Radio value='4'></Radio>
                        </Stack>
                        </RadioGroup> */}
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'} bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>2. How did we make you feel?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'} bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>3. Did you encounter any bugs or glitches?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'} bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>4. Which areas do you think the website needs more improvement on?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'} bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Heading fontFamily={'Raleway'} color="white" mx="auto" mt="5vh">With regards to your learning style...</Heading>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>5. What do you think about peer reviews and feedback?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'} bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>6. Which do you prefer, learning with others or through your own?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'}  bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>7. What skill did you learn or you think that you will learn from using Critique Hall?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'}  bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Heading fontFamily={'Raleway'} color="white" mx="auto" mt="5vh">With regards to your personal development...</Heading>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>8.  Have you tried publishing a post? If no, why not?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'} bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>9. Have you tried interacting with others through the website (giving or receiving stars/critiques)? If no, why not?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'}  bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>10. If you answered yes in question 8, would you consider the work/project that you posted your talent?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'}  bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>11. If you answered yes in question 8, did the critiques help you improve your work/project?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'}  bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    <Box mt="4vh" display='flex'>
                        <FormLabel fontFamily={'Raleway'} fontSize={'lg'}>12. If you answered yes in question 8 and/or 9, how did doing those make you feel?</FormLabel>
                    </Box>
                    <Box mt="1vh" display='flex'>
                        <Textarea className={styles.input_box} fontFamily={'Raleway'}  bgColor={useColorModeValue('white', '#5E5E5E')} color={useColorModeValue('black', 'white')} onChange={(e)=>setFeedback(e.target.value)}></Textarea>
                    </Box>
                    
                    <Box w="100%">
                        <Center><Button fontFamily={'Raleway'} size={'lg'} type='submit' mx='auto' bgColor={useColorModeValue('#2777C1','#0085FF')} color={useColorModeValue('#FFFFFF', '#FFFFFF')} _hover={{bgColor: useColorModeValue('#56AEFF', '#0B5090')}} mt="10" onClick={SubmitFeedback}>SUBMIT</Button></Center>
                    </Box>
                    </form>
                </Box>             
            </Box>
        </main>
    )
}

